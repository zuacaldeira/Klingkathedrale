<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stimmen — Klangkathedrale | Helmuth Rilling (1933–2026)</title>
<meta name="description" content="Digitales Gedenkbuch und Kerzen-Tribut für Helmuth Rilling — Stimmen der Erinnerung">
<meta property="og:title" content="Stimmen — Klangkathedrale">
<meta property="og:description" content="Zünden Sie eine Kerze an für Helmuth Rilling">
<meta property="og:type" content="website">
<meta name="theme-color" content="#C9A84C">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,700;0,6..96,900;1,6..96,400;1,6..96,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&display=swap" rel="stylesheet">
<link rel="manifest" href="manifest.json">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --color-gold: #C9A84C;
  --color-gold-dim: rgba(201,168,76,0.35);
  --color-gold-glow: rgba(201,168,76,0.12);
  --color-ink: #1A1410;
  --color-ivory: #F5F0E8;
  --color-parchment: #EDE6D6;
  --color-bg: #0A0908;
  --font-display: 'Bodoni Moda', serif;
  --font-body: 'Cormorant Garamond', serif;
}

html { scroll-behavior: smooth; }

body {
  background: var(--color-bg);
  color: var(--color-ivory);
  font-family: var(--font-body);
  line-height: 1.7;
  overflow-x: hidden;
  min-height: 100vh;
}

/* ═══ WARM AMBIENT BACKGROUND ═══ */
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background:
    radial-gradient(ellipse 80% 60% at 50% 30%, rgba(201,168,76,0.06) 0%, transparent 70%),
    radial-gradient(ellipse 40% 50% at 20% 70%, rgba(180,120,50,0.04) 0%, transparent 60%),
    radial-gradient(ellipse 40% 50% at 80% 80%, rgba(180,120,50,0.04) 0%, transparent 60%);
  pointer-events: none;
  z-index: 0;
  transition: opacity 2s ease;
}

/* Intensified glow class added via JS */
body.many-candles::before {
  background:
    radial-gradient(ellipse 80% 60% at 50% 30%, rgba(201,168,76,0.12) 0%, transparent 70%),
    radial-gradient(ellipse 40% 50% at 20% 70%, rgba(180,120,50,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 40% 50% at 80% 80%, rgba(180,120,50,0.08) 0%, transparent 60%);
}

/* ═══ NAVIGATION ═══ */
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(to bottom, rgba(10,9,8,0.97), rgba(10,9,8,0));
  transition: background 0.4s;
}
nav.scrolled { background: rgba(10,9,8,0.97); backdrop-filter: blur(10px); }
nav .logo {
  font-family: var(--font-display);
  font-size: 1.2rem;
  color: var(--color-gold);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  text-decoration: none;
}
nav .nav-links { display: flex; gap: 1.5rem; align-items: center; }
nav .nav-links a {
  color: rgba(245,240,232,0.6);
  text-decoration: none;
  font-family: var(--font-body);
  font-size: 0.95rem;
  letter-spacing: 0.05em;
  transition: color 0.3s;
}
nav .nav-links a:hover { color: var(--color-gold); }
.menu-toggle {
  display: none;
  background: none; border: none;
  color: var(--color-gold);
  font-size: 1.5rem;
  cursor: pointer;
}

/* ═══ HEADER ═══ */
.page-header {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 8rem 2rem 3rem;
}
.page-header h1 {
  font-family: var(--font-display);
  font-size: clamp(2.2rem, 5vw, 3.8rem);
  font-weight: 400;
  color: var(--color-ivory);
  letter-spacing: 0.08em;
  margin-bottom: 0.5rem;
}
.page-header .subtitle {
  font-family: var(--font-body);
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  color: rgba(245,240,232,0.5);
  font-style: italic;
  font-weight: 300;
  margin-bottom: 2rem;
}

/* ═══ CANDLE COUNTER ═══ */
.candle-counter {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin: 1.5rem auto;
  font-family: var(--font-display);
  font-size: clamp(1.2rem, 3vw, 1.8rem);
  color: var(--color-gold);
  letter-spacing: 0.05em;
}
.candle-counter .count {
  display: inline-block;
  min-width: 2ch;
  transition: transform 0.4s cubic-bezier(0.34,1.56,0.64,1);
}
.candle-counter .count.bump {
  transform: scale(1.3);
}
.candle-counter .flame-icon {
  width: 28px;
  height: 42px;
  display: inline-block;
  vertical-align: middle;
}

/* SVG candle flame animation */
@keyframes flicker {
  0%, 100% { transform: scaleY(1) scaleX(1) translateY(0); opacity: 1; }
  25% { transform: scaleY(1.08) scaleX(0.94) translateY(-1px); opacity: 0.92; }
  50% { transform: scaleY(0.95) scaleX(1.04) translateY(0.5px); opacity: 1; }
  75% { transform: scaleY(1.04) scaleX(0.97) translateY(-0.5px); opacity: 0.95; }
}
@keyframes flickerGlow {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.5; }
}

/* ═══ CONTROLS BAR ═══ */
.controls {
  position: relative;
  z-index: 1;
  max-width: 1200px;
  margin: 0 auto 2rem;
  padding: 0 2rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  align-items: center;
  justify-content: center;
}
.controls button, .controls select, .controls input[type="text"] {
  font-family: var(--font-body);
  font-size: 1rem;
  background: rgba(201,168,76,0.06);
  color: var(--color-ivory);
  border: 1px solid rgba(201,168,76,0.2);
  padding: 0.55rem 1.2rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;
  letter-spacing: 0.03em;
}
.controls button:hover, .controls select:hover {
  border-color: var(--color-gold);
  background: rgba(201,168,76,0.1);
}
.controls button.active {
  background: rgba(201,168,76,0.15);
  border-color: var(--color-gold);
  color: var(--color-gold);
}
.controls select {
  appearance: none;
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23C9A84C'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.8rem center;
  padding-right: 2.2rem;
}
.controls select option {
  background: #1A1410;
  color: var(--color-ivory);
}
.controls input[type="text"] {
  min-width: 180px;
}
.controls input[type="text"]::placeholder {
  color: rgba(245,240,232,0.35);
}
.controls input[type="text"]:focus {
  outline: none;
  border-color: var(--color-gold);
  background: rgba(201,168,76,0.08);
}

/* ═══ NEW ENTRY BUTTON ═══ */
.btn-new-entry {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 900;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-gold), #B8923E);
  border: none;
  color: var(--color-ink);
  font-size: 1.8rem;
  cursor: pointer;
  box-shadow: 0 4px 24px rgba(201,168,76,0.3), 0 0 60px rgba(201,168,76,0.1);
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}
.btn-new-entry:hover {
  transform: scale(1.08);
  box-shadow: 0 4px 32px rgba(201,168,76,0.45), 0 0 80px rgba(201,168,76,0.15);
}
.btn-new-entry .plus-icon {
  font-weight: 300;
  font-family: var(--font-display);
  margin-top: -2px;
}

/* ═══ MASONRY GRID ═══ */
.entries-container {
  position: relative;
  z-index: 1;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem 6rem;
}
.masonry {
  columns: 3;
  column-gap: 1.5rem;
}

/* ═══ ENTRY CARDS ═══ */
.entry-card {
  break-inside: avoid;
  background:
    linear-gradient(135deg, rgba(237,230,214,0.04) 0%, rgba(201,168,76,0.03) 50%, rgba(237,230,214,0.02) 100%),
    rgba(201,168,76,0.03);
  border: 1px solid rgba(201,168,76,0.12);
  border-radius: 6px;
  padding: 1.8rem;
  margin-bottom: 1.5rem;
  position: relative;
  animation: cardSway 8s ease-in-out infinite;
  transition: border-color 0.6s, box-shadow 0.6s, opacity 0.5s, transform 0.5s;
  opacity: 0;
  transform: translateY(20px);
}
.entry-card.visible {
  opacity: 1;
  transform: translateY(0);
}
.entry-card:nth-child(even) { animation-delay: -3s; }
.entry-card:nth-child(3n) { animation-delay: -5s; }
.entry-card:nth-child(4n+1) { animation-delay: -1.5s; }

@keyframes cardSway {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  33% { transform: translateY(-2px) rotate(0.15deg); }
  66% { transform: translateY(1px) rotate(-0.1deg); }
}
.entry-card.visible { animation-name: cardSway; }

/* New entry glow */
.entry-card.new-glow {
  border-color: var(--color-gold) !important;
  box-shadow: 0 0 30px rgba(201,168,76,0.2), 0 0 60px rgba(201,168,76,0.08);
}
@keyframes glowFade {
  0% { border-color: var(--color-gold); box-shadow: 0 0 30px rgba(201,168,76,0.25), 0 0 60px rgba(201,168,76,0.1); }
  100% { border-color: rgba(201,168,76,0.12); box-shadow: none; }
}

.entry-card .card-message {
  font-family: var(--font-body);
  font-size: 1.15rem;
  line-height: 1.75;
  color: rgba(245,240,232,0.88);
  font-weight: 300;
  margin-bottom: 1.2rem;
  font-style: italic;
}
.entry-card .card-message::before { content: '\201E'; color: var(--color-gold); font-size: 1.4em; margin-right: 0.1em; }
.entry-card .card-message::after { content: '\201C'; color: var(--color-gold); font-size: 1.4em; margin-left: 0.1em; }

.entry-card .card-meta {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  flex-wrap: wrap;
  gap: 0.5rem;
  border-top: 1px solid rgba(201,168,76,0.08);
  padding-top: 1rem;
}
.entry-card .card-author {
  font-family: var(--font-display);
  font-size: 0.95rem;
  color: var(--color-gold);
  letter-spacing: 0.03em;
}
.entry-card .card-detail {
  font-size: 0.85rem;
  color: rgba(245,240,232,0.4);
  font-weight: 300;
}
.entry-card .card-relationship {
  display: inline-block;
  font-size: 0.78rem;
  color: rgba(201,168,76,0.6);
  border: 1px solid rgba(201,168,76,0.15);
  border-radius: 3px;
  padding: 0.15rem 0.5rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  font-weight: 400;
}
.entry-card .card-date {
  font-size: 0.8rem;
  color: rgba(245,240,232,0.3);
  font-weight: 300;
}

/* ═══ RANDOM VOICE (FULLSCREEN) ═══ */
.random-voice-display {
  position: relative;
  z-index: 1;
  display: none;
  min-height: 60vh;
  align-items: center;
  justify-content: center;
  padding: 4rem 2rem 6rem;
}
.random-voice-display.active {
  display: flex;
}
.random-voice-inner {
  max-width: 700px;
  text-align: center;
  animation: fadeInUp 0.8s ease;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
.random-voice-inner .rv-message {
  font-family: var(--font-body);
  font-size: clamp(1.4rem, 3vw, 2rem);
  line-height: 1.8;
  color: var(--color-ivory);
  font-style: italic;
  font-weight: 300;
  margin-bottom: 2rem;
}
.random-voice-inner .rv-message::before { content: '\201E'; color: var(--color-gold); font-size: 1.3em; }
.random-voice-inner .rv-message::after { content: '\201C'; color: var(--color-gold); font-size: 1.3em; }
.random-voice-inner .rv-author {
  font-family: var(--font-display);
  font-size: 1.2rem;
  color: var(--color-gold);
  letter-spacing: 0.06em;
  margin-bottom: 0.4rem;
}
.random-voice-inner .rv-detail {
  font-size: 1rem;
  color: rgba(245,240,232,0.4);
  font-weight: 300;
}
.random-voice-inner .rv-relationship {
  display: inline-block;
  margin-top: 0.8rem;
  font-size: 0.85rem;
  color: rgba(201,168,76,0.6);
  border: 1px solid rgba(201,168,76,0.2);
  border-radius: 3px;
  padding: 0.2rem 0.7rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}
.random-voice-inner .rv-next {
  display: inline-block;
  margin-top: 2.5rem;
  font-family: var(--font-body);
  font-size: 1rem;
  color: rgba(245,240,232,0.5);
  background: none;
  border: 1px solid rgba(201,168,76,0.2);
  padding: 0.6rem 1.8rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;
  letter-spacing: 0.03em;
}
.random-voice-inner .rv-next:hover {
  color: var(--color-gold);
  border-color: var(--color-gold);
}

/* ═══ OVERLAY FORM ═══ */
.overlay {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: rgba(10,9,8,0);
  pointer-events: none;
  transition: background 0.4s;
}
.overlay.open {
  background: rgba(10,9,8,0.75);
  pointer-events: all;
}
.overlay-panel {
  width: 100%;
  max-width: 560px;
  max-height: 90vh;
  overflow-y: auto;
  background:
    linear-gradient(160deg, rgba(237,230,214,0.06) 0%, rgba(26,20,16,0.98) 40%),
    var(--color-ink);
  border: 1px solid rgba(201,168,76,0.15);
  border-bottom: none;
  border-radius: 16px 16px 0 0;
  padding: 2.5rem 2.5rem 2rem;
  transform: translateY(100%);
  transition: transform 0.5s cubic-bezier(0.33, 1, 0.68, 1);
}
.overlay.open .overlay-panel {
  transform: translateY(0);
}
.overlay-panel h2 {
  font-family: var(--font-display);
  font-size: 1.6rem;
  font-weight: 400;
  color: var(--color-ivory);
  letter-spacing: 0.06em;
  margin-bottom: 0.3rem;
}
.overlay-panel .form-subtitle {
  font-size: 1rem;
  color: rgba(245,240,232,0.4);
  font-weight: 300;
  font-style: italic;
  margin-bottom: 2rem;
}
.overlay-panel .close-btn {
  position: absolute;
  top: 1.2rem;
  right: 1.5rem;
  background: none;
  border: none;
  color: rgba(245,240,232,0.4);
  font-size: 1.6rem;
  cursor: pointer;
  transition: color 0.3s;
  line-height: 1;
}
.overlay-panel .close-btn:hover { color: var(--color-gold); }

.form-group {
  margin-bottom: 1.4rem;
}
.form-group label {
  display: block;
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: rgba(245,240,232,0.55);
  letter-spacing: 0.04em;
  margin-bottom: 0.4rem;
  font-weight: 400;
}
.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  font-family: var(--font-body);
  font-size: 1.05rem;
  color: var(--color-ivory);
  background: rgba(201,168,76,0.04);
  border: 1px solid rgba(201,168,76,0.15);
  border-radius: 4px;
  padding: 0.7rem 1rem;
  transition: border-color 0.3s, background 0.3s;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--color-gold);
  background: rgba(201,168,76,0.07);
}
.form-group input::placeholder,
.form-group textarea::placeholder {
  color: rgba(245,240,232,0.25);
}
.form-group select {
  appearance: none;
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23C9A84C'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.8rem center;
  padding-right: 2.2rem;
  cursor: pointer;
}
.form-group select option {
  background: var(--color-ink);
  color: var(--color-ivory);
}
.form-group textarea {
  resize: vertical;
  min-height: 120px;
  line-height: 1.7;
}
.form-group .char-count {
  text-align: right;
  font-size: 0.8rem;
  color: rgba(245,240,232,0.3);
  margin-top: 0.3rem;
}
.form-group .char-count.near-limit { color: var(--color-gold); }
.form-group .char-count.at-limit { color: #D4725C; }

.btn-submit {
  width: 100%;
  font-family: var(--font-display);
  font-size: 1.1rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--color-ink);
  background: linear-gradient(135deg, var(--color-gold), #B8923E);
  border: none;
  border-radius: 4px;
  padding: 1rem;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 0.5rem;
}
.btn-submit:hover {
  box-shadow: 0 4px 24px rgba(201,168,76,0.3);
  transform: translateY(-1px);
}
.btn-submit:active {
  transform: translateY(0);
}

/* ═══ CANDLE-LIGHTING ANIMATION ═══ */
.candle-anim-overlay {
  position: fixed;
  inset: 0;
  z-index: 3000;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(10,9,8,0.9);
}
.candle-anim-overlay.active {
  display: flex;
}
.candle-anim-inner {
  text-align: center;
}
.candle-anim-inner svg {
  width: 80px;
  height: 160px;
}
.candle-anim-inner .anim-text {
  font-family: var(--font-display);
  font-size: 1.3rem;
  color: var(--color-gold);
  letter-spacing: 0.06em;
  margin-top: 1.5rem;
  opacity: 0;
  animation: fadeInText 1s 0.8s forwards;
}
@keyframes fadeInText {
  to { opacity: 1; }
}
@keyframes flameGrow {
  0% { transform: scaleY(0) scaleX(0.5); opacity: 0; }
  40% { transform: scaleY(0.6) scaleX(0.8); opacity: 0.7; }
  100% { transform: scaleY(1) scaleX(1); opacity: 1; }
}
@keyframes glowGrow {
  0% { r: 0; opacity: 0; }
  100% { r: 40; opacity: 0.3; }
}

/* ═══ EMPTY STATE ═══ */
.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  color: rgba(245,240,232,0.35);
  font-size: 1.1rem;
  font-style: italic;
}

/* ═══ FOOTER ═══ */
footer {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 3rem 2rem;
  border-top: 1px solid rgba(201,168,76,0.08);
}
footer a {
  color: var(--color-gold);
  text-decoration: none;
  font-family: var(--font-body);
  font-size: 0.95rem;
  letter-spacing: 0.03em;
  transition: opacity 0.3s;
}
footer a:hover { opacity: 0.7; }
footer .footer-note {
  margin-top: 0.8rem;
  font-size: 0.82rem;
  color: rgba(245,240,232,0.25);
  font-weight: 300;
}

/* ═══ RESPONSIVE ═══ */
@media (max-width: 900px) {
  .masonry { columns: 2; }
}
@media (max-width: 600px) {
  nav { padding: 0.8rem 1.2rem; }
  .nav-links-desktop { display: none !important; }
  .menu-toggle { display: block; }
  .mobile-menu {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(10,9,8,0.97);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    z-index: 999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }
  .mobile-menu.open { opacity: 1; pointer-events: all; }
  .mobile-menu a {
    font-family: var(--font-display);
    font-size: 1.3rem;
    color: var(--color-ivory);
    text-decoration: none;
    letter-spacing: 0.08em;
  }
  .mobile-menu a:hover { color: var(--color-gold); }

  .page-header { padding: 6.5rem 1.5rem 2rem; }
  .masonry { columns: 1; }
  .controls { padding: 0 1rem; }
  .controls button, .controls select, .controls input[type="text"] {
    font-size: 0.9rem;
    padding: 0.5rem 0.9rem;
  }
  .entries-container { padding: 0 1rem 6rem; }
  .entry-card { padding: 1.4rem; }
  .overlay-panel { padding: 2rem 1.5rem 1.5rem; }
  .btn-new-entry { bottom: 1.2rem; right: 1.2rem; width: 54px; height: 54px; font-size: 1.5rem; }
}

/* ═══ SCROLLBAR ═══ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.2); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(201,168,76,0.35); }
</style>
</head>
<body>

<!-- Navigation -->
<nav id="mainNav">
  <a href="klangkathedrale.html" class="logo">Klangkathedrale</a>
  <div class="nav-links nav-links-desktop">
    <a href="klangkathedrale.html">Denkmal</a>
    <a href="stimmen.html" style="color: var(--color-gold);">Stimmen</a>
  </div>
  <button class="menu-toggle" id="menuToggle" aria-label="Menü öffnen">&#9776;</button>
</nav>

<!-- Mobile menu -->
<div class="mobile-menu" id="mobileMenu">
  <a href="klangkathedrale.html">Denkmal</a>
  <a href="stimmen.html">Stimmen</a>
  <button onclick="document.getElementById('mobileMenu').classList.remove('open');document.getElementById('menuToggle').innerHTML='&#9776;'" style="background:none;border:1px solid rgba(201,168,76,0.3);color:var(--color-gold);padding:0.5rem 1.5rem;border-radius:4px;cursor:pointer;font-family:var(--font-body);font-size:1rem;margin-top:1rem;">Schliessen</button>
</div>

<!-- Page Header -->
<header class="page-header">
  <h1>Stimmen</h1>
  <p class="subtitle">Gedenkbuch für Helmuth Rilling</p>
  <div class="candle-counter">
    <!-- SVG Candle Flame -->
    <svg class="flame-icon" viewBox="0 0 28 42" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="flameGrad" cx="50%" cy="60%" r="50%">
          <stop offset="0%" stop-color="#FFF7E0"/>
          <stop offset="40%" stop-color="#F0C850"/>
          <stop offset="100%" stop-color="#C9A84C" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="glowGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#C9A84C" stop-opacity="0.4"/>
          <stop offset="100%" stop-color="#C9A84C" stop-opacity="0"/>
        </radialGradient>
      </defs>
      <circle cx="14" cy="28" r="12" fill="url(#glowGrad)" style="animation: flickerGlow 3s ease-in-out infinite;"/>
      <rect x="11" y="28" width="6" height="14" rx="1" fill="#EDE6D6" opacity="0.4"/>
      <ellipse cx="14" cy="26" rx="5.5" ry="10" fill="url(#flameGrad)" style="transform-origin: 14px 26px; animation: flicker 2.5s ease-in-out infinite;"/>
      <ellipse cx="14" cy="24" rx="2.5" ry="5" fill="#FFF7E0" opacity="0.7" style="transform-origin: 14px 24px; animation: flicker 1.8s ease-in-out infinite 0.3s;"/>
    </svg>
    <span><span class="count" id="candleCount">0</span> Kerzen brennen</span>
  </div>
</header>

<!-- Controls -->
<div class="controls">
  <button class="active" id="btnAll" onclick="setMode('all')">Alle Stimmen</button>
  <button id="btnRandom" onclick="setMode('random')">Zufällige Stimme</button>
  <select id="filterRelationship" onchange="applyFilters()">
    <option value="">Alle Beziehungen</option>
    <option value="Student">Student</option>
    <option value="Musiker">Musiker</option>
    <option value="Zuhörer">Zuhörer</option>
    <option value="Kollege">Kollege</option>
    <option value="Andere">Andere</option>
  </select>
  <input type="text" id="searchInput" placeholder="Suche..." oninput="applyFilters()">
</div>

<!-- Entries Feed -->
<div class="entries-container" id="entriesContainer">
  <div class="masonry" id="masonry"></div>
</div>

<!-- Random Voice Display -->
<div class="random-voice-display" id="randomDisplay">
  <div class="random-voice-inner" id="randomInner"></div>
</div>

<!-- Floating New Entry Button -->
<button class="btn-new-entry" id="btnNewEntry" aria-label="Neue Kerze anzünden" onclick="openForm()">
  <span class="plus-icon">+</span>
</button>

<!-- Entry Form Overlay -->
<div class="overlay" id="overlay">
  <div class="overlay-panel" id="overlayPanel">
    <button class="close-btn" onclick="closeForm()" aria-label="Schliessen">&times;</button>
    <h2>Eine Kerze anzünden</h2>
    <p class="form-subtitle">Teilen Sie Ihre Erinnerung an Helmuth Rilling</p>
    <form id="entryForm" onsubmit="submitEntry(event)">
      <div class="form-group">
        <label for="entryName">Name <span style="opacity:0.5">(optional)</span></label>
        <input type="text" id="entryName" placeholder="Anonym" maxlength="80">
      </div>
      <div class="form-group">
        <label for="entryCity">Stadt / Land <span style="opacity:0.5">(optional)</span></label>
        <input type="text" id="entryCity" placeholder="z.B. Stuttgart, Deutschland" maxlength="80">
      </div>
      <div class="form-group">
        <label for="entryRelationship">Beziehung</label>
        <select id="entryRelationship">
          <option value="Zuhörer">Zuhörer</option>
          <option value="Student">Student</option>
          <option value="Musiker">Musiker</option>
          <option value="Kollege">Kollege</option>
          <option value="Andere">Andere</option>
        </select>
      </div>
      <div class="form-group">
        <label for="entryMessage">Ihre Nachricht</label>
        <textarea id="entryMessage" placeholder="Ihre Erinnerung, Ihr Dank, Ihre Worte..." maxlength="500" oninput="updateCharCount()"></textarea>
        <div class="char-count" id="charCount">0 / 500</div>
      </div>
      <button type="submit" class="btn-submit">Eine Kerze anzünden</button>
    </form>
  </div>
</div>

<!-- Candle-Lighting Animation Overlay -->
<div class="candle-anim-overlay" id="candleAnim">
  <div class="candle-anim-inner">
    <svg viewBox="0 0 80 160" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="animFlameGrad" cx="50%" cy="55%" r="50%">
          <stop offset="0%" stop-color="#FFFBE6"/>
          <stop offset="35%" stop-color="#F0C850"/>
          <stop offset="70%" stop-color="#C9A84C"/>
          <stop offset="100%" stop-color="#C9A84C" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="animGlowGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#C9A84C" stop-opacity="0.5"/>
          <stop offset="100%" stop-color="#C9A84C" stop-opacity="0"/>
        </radialGradient>
      </defs>
      <!-- Glow -->
      <circle id="animGlow" cx="40" cy="70" r="0" fill="url(#animGlowGrad)" style="animation: glowGrow 1.2s 0.3s ease forwards;"/>
      <!-- Candle body -->
      <rect x="30" y="85" width="20" height="60" rx="3" fill="#EDE6D6" opacity="0.5"/>
      <!-- Flame -->
      <ellipse id="animFlame" cx="40" cy="72" rx="14" ry="28" fill="url(#animFlameGrad)" style="transform-origin: 40px 85px; animation: flameGrow 1.2s ease forwards, flicker 2s 1.2s ease-in-out infinite;"/>
      <ellipse cx="40" cy="68" rx="6" ry="13" fill="#FFFBE6" opacity="0.6" style="transform-origin: 40px 80px; animation: flameGrow 1.2s 0.2s ease forwards, flicker 1.6s 1.4s ease-in-out infinite;"/>
    </svg>
    <div class="anim-text">Ihre Kerze brennt</div>
  </div>
</div>

<!-- Footer -->
<footer>
  <a href="klangkathedrale.html">&larr; Zurück zur Klangkathedrale</a>
  <p class="footer-note">Ein digitales Denkmal für Helmuth Rilling (1933&ndash;2026)</p>
</footer>

<script>
(function() {
  'use strict';

  // ═══ STORAGE KEY ═══
  const STORAGE_KEY = 'klangkathedrale_stimmen';

  // ═══ SEED DATA ═══
  const seedEntries = [
    {
      timestamp: '2026-02-08T09:15:00Z',
      name: 'Maria Schneider',
      city: 'Stuttgart, Deutschland',
      relationship: 'Student',
      message: 'Als junge Studentin in seiner Chorklasse habe ich gelernt, dass Musik nicht nur Klang ist, sondern Gebet. Jede Probe war eine geistliche Übung. Danke, Maestro, für alles.'
    },
    {
      timestamp: '2026-02-08T10:32:00Z',
      name: 'James Whitfield',
      city: 'London, England',
      relationship: 'Musiker',
      message: 'I had the privilege of playing under Rilling at the Oregon Bach Festival. His reading of the B minor Mass changed my understanding of Bach forever. The cathedral of sound he built will never fall silent.'
    },
    {
      timestamp: '2026-02-08T11:45:00Z',
      name: 'Keiko Tanaka',
      city: 'Tokyo, Japan',
      relationship: 'Zuhörer',
      message: 'Rillings Aufnahme der Johannes-Passion begleitet mich seit dreissig Jahren. Seine Interpretation hat mir Bach nahegebracht wie kein anderer Dirigent. In tiefer Dankbarkeit.'
    },
    {
      timestamp: '2026-02-08T14:20:00Z',
      name: 'Thomas Berger',
      city: 'Leipzig, Deutschland',
      relationship: 'Kollege',
      message: 'Wir teilten die Liebe zu Bach und die Überzeugung, dass seine Musik eine Brücke zwischen den Kulturen schlägt. Helmuth hat diese Brücke wie kein Zweiter gebaut. Ruhe in Frieden, lieber Freund.'
    },
    {
      timestamp: '2026-02-08T16:05:00Z',
      name: 'Anonym',
      city: '',
      relationship: 'Zuhörer',
      message: 'Ich sass 1985 im Publikum bei der Matthäus-Passion in der Stiftskirche. Es war der Moment, in dem ich verstand, warum man Musik eine Sprache des Göttlichen nennt.'
    },
    {
      timestamp: '2026-02-09T08:30:00Z',
      name: 'Clara Fontaine',
      city: 'Lyon, Frankreich',
      relationship: 'Student',
      message: 'Maître Rilling nous a enseigné que chaque note de Bach est une prière. Son héritage vit dans chaque choeur qu\'il a touché. Merci pour la lumière.'
    },
    {
      timestamp: '2026-02-09T10:15:00Z',
      name: 'Hans-Peter Müller',
      city: 'Tübingen, Deutschland',
      relationship: 'Zuhörer',
      message: 'Die Gächinger Kantorei unter Rilling war ein Wunder. Jahrzehntelang habe ich jedes Konzert in der Stiftskirche besucht. Eine Ära geht zu Ende, aber die Musik klingt weiter.'
    },
    {
      timestamp: '2026-02-09T12:40:00Z',
      name: 'Sarah Chen',
      city: 'New York, USA',
      relationship: 'Musiker',
      message: 'Rilling brought Bach to America with such passion and integrity. His Oregon Bach Festival was a pilgrimage for all of us who believed in the transformative power of choral music.'
    },
    {
      timestamp: '2026-02-09T15:22:00Z',
      name: 'Pfarrer Martin Krehl',
      city: 'Stuttgart, Deutschland',
      relationship: 'Andere',
      message: 'Helmuth Rilling hat die Botschaft des Evangeliums durch Bachs Musik in die Herzen von Millionen getragen. Sein Dienst war ein musikalisches Predigen. Der Herr hat ihn nun in seinen Frieden aufgenommen.'
    },
    {
      timestamp: '2026-02-09T18:00:00Z',
      name: 'Anonym',
      city: 'Wien, Österreich',
      relationship: 'Student',
      message: 'Die Internationale Bachakademie war mein zweites Zuhause. Rilling hat uns nicht nur Musik gelehrt, sondern Demut vor dem Werk. Jede Aufführung war ihm heilig.'
    },
    {
      timestamp: '2026-02-10T07:45:00Z',
      name: 'Roberto Marchetti',
      city: 'Rom, Italien',
      relationship: 'Musiker',
      message: 'Ho avuto l\'onore di cantare sotto la sua direzione il Requiem di Brahms. La sua lettura era di una spiritualità e una profondità ineguagliabili. Maestro, grazie per sempre.'
    },
    {
      timestamp: '2026-02-10T09:30:00Z',
      name: 'Elisabeth Kaufmann',
      city: 'Zürich, Schweiz',
      relationship: 'Zuhörer',
      message: 'Als ich Rillings Weihnachtsoratorium zum ersten Mal hörte, weinte ich vor Freude. Er hatte die Gabe, die menschliche Seele durch Musik zu berühren. Diese Gabe lebt weiter in allen, die ihn gehört haben.'
    },
    {
      timestamp: '2026-02-10T13:10:00Z',
      name: 'David Park',
      city: 'Seoul, Südkorea',
      relationship: 'Student',
      message: 'Professor Rilling taught me at the Bachakademie summer course in 2015. His eyes would light up when discussing the architecture of a Bach fugue. I carry his teachings with me every day.'
    },
    {
      timestamp: '2026-02-10T17:55:00Z',
      name: 'Ingrid Larsson',
      city: 'Stockholm, Schweden',
      relationship: 'Kollege',
      message: 'Helmuth war ein Brückenbauer — zwischen Epochen, zwischen Kulturen, zwischen Herz und Verstand. Sein Vermächtnis ist eine ganze Generation von Musikern, die Bach mit neuen Augen sehen.'
    }
  ];

  // ═══ DATA ═══
  function loadEntries() {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) {
      try { return JSON.parse(stored); } catch(e) { /* fall through */ }
    }
    // Seed on first visit
    localStorage.setItem(STORAGE_KEY, JSON.stringify(seedEntries));
    return [...seedEntries];
  }

  function saveEntries(entries) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
  }

  let entries = loadEntries();
  let currentMode = 'all'; // 'all' | 'random'

  // ═══ FORMAT DATE ═══
  function formatDate(isoStr) {
    const d = new Date(isoStr);
    const months = ['Jan.', 'Feb.', 'März', 'Apr.', 'Mai', 'Juni', 'Juli', 'Aug.', 'Sep.', 'Okt.', 'Nov.', 'Dez.'];
    return d.getDate() + '. ' + months[d.getMonth()] + ' ' + d.getFullYear();
  }

  // ═══ UPDATE COUNTER ═══
  function updateCounter(animate) {
    const el = document.getElementById('candleCount');
    el.textContent = entries.length;
    if (animate) {
      el.classList.add('bump');
      setTimeout(() => el.classList.remove('bump'), 400);
    }
    // Intensify background glow with more entries
    if (entries.length > 10) {
      document.body.classList.add('many-candles');
    }
  }

  // ═══ CREATE CARD HTML ═══
  function createCardElement(entry, index, isNew) {
    const card = document.createElement('div');
    card.className = 'entry-card' + (isNew ? ' new-glow' : '');
    card.dataset.relationship = entry.relationship;
    card.dataset.index = index;

    const nameDisplay = entry.name || 'Anonym';
    const cityDisplay = entry.city ? entry.city : '';
    const dateDisplay = formatDate(entry.timestamp);

    card.innerHTML =
      '<div class="card-message">' + escapeHtml(entry.message) + '</div>' +
      '<div class="card-meta">' +
        '<div>' +
          '<div class="card-author">' + escapeHtml(nameDisplay) + '</div>' +
          (cityDisplay ? '<div class="card-detail">' + escapeHtml(cityDisplay) + '</div>' : '') +
        '</div>' +
        '<div style="text-align:right;">' +
          '<div class="card-relationship">' + escapeHtml(entry.relationship) + '</div>' +
          '<div class="card-date">' + dateDisplay + '</div>' +
        '</div>' +
      '</div>';

    // Animate in
    setTimeout(() => card.classList.add('visible'), 60 + index * 80);

    // Fade out new glow after 4 seconds
    if (isNew) {
      setTimeout(() => {
        card.style.animation = 'glowFade 2s forwards, cardSway 8s ease-in-out infinite';
      }, 4000);
    }

    return card;
  }

  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  // ═══ RENDER ENTRIES ═══
  function renderEntries(newEntryIndex) {
    const masonry = document.getElementById('masonry');
    const container = document.getElementById('entriesContainer');
    const randomDisplay = document.getElementById('randomDisplay');

    // Get filters
    const relFilter = document.getElementById('filterRelationship').value;
    const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();

    // Filter entries
    let filtered = entries.filter(function(e) {
      if (relFilter && e.relationship !== relFilter) return false;
      if (searchTerm) {
        const haystack = ((e.name || '') + ' ' + (e.city || '') + ' ' + e.message + ' ' + e.relationship).toLowerCase();
        if (haystack.indexOf(searchTerm) === -1) return false;
      }
      return true;
    });

    if (currentMode === 'all') {
      randomDisplay.classList.remove('active');
      container.style.display = '';

      masonry.innerHTML = '';
      if (filtered.length === 0) {
        masonry.innerHTML = '<div class="empty-state">Keine Einträge gefunden.</div>';
        return;
      }

      // Newest first
      const sorted = filtered.slice().sort(function(a, b) {
        return new Date(b.timestamp) - new Date(a.timestamp);
      });

      sorted.forEach(function(entry, i) {
        const origIndex = entries.indexOf(entry);
        const isNew = (origIndex === newEntryIndex);
        masonry.appendChild(createCardElement(entry, i, isNew));
      });

    } else if (currentMode === 'random') {
      container.style.display = 'none';
      randomDisplay.classList.add('active');
      showRandomVoice(filtered);
    }
  }

  // ═══ RANDOM VOICE ═══
  function showRandomVoice(pool) {
    const inner = document.getElementById('randomInner');
    if (!pool) {
      const relFilter = document.getElementById('filterRelationship').value;
      const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
      pool = entries.filter(function(e) {
        if (relFilter && e.relationship !== relFilter) return false;
        if (searchTerm) {
          const haystack = ((e.name || '') + ' ' + (e.city || '') + ' ' + e.message + ' ' + e.relationship).toLowerCase();
          if (haystack.indexOf(searchTerm) === -1) return false;
        }
        return true;
      });
    }

    if (pool.length === 0) {
      inner.innerHTML = '<div class="empty-state">Keine Einträge gefunden.</div>';
      return;
    }

    const entry = pool[Math.floor(Math.random() * pool.length)];
    const nameDisplay = entry.name || 'Anonym';
    const cityDisplay = entry.city ? entry.city : '';

    inner.innerHTML =
      '<div class="rv-message">' + escapeHtml(entry.message) + '</div>' +
      '<div class="rv-author">' + escapeHtml(nameDisplay) + '</div>' +
      (cityDisplay ? '<div class="rv-detail">' + escapeHtml(cityDisplay) + '</div>' : '') +
      '<div class="rv-relationship">' + escapeHtml(entry.relationship) + '</div>' +
      '<br><button class="rv-next" onclick="showRandomVoice()">Nächste Stimme &rarr;</button>';

    // Re-trigger animation
    inner.style.animation = 'none';
    inner.offsetHeight; // reflow
    inner.style.animation = 'fadeInUp 0.8s ease';
  }
  window.showRandomVoice = showRandomVoice;

  // ═══ MODE SWITCH ═══
  function setMode(mode) {
    currentMode = mode;
    document.getElementById('btnAll').classList.toggle('active', mode === 'all');
    document.getElementById('btnRandom').classList.toggle('active', mode === 'random');
    renderEntries();
  }
  window.setMode = setMode;

  // ═══ FILTERS ═══
  function applyFilters() {
    renderEntries();
  }
  window.applyFilters = applyFilters;

  // ═══ FORM ═══
  function openForm() {
    document.getElementById('overlay').classList.add('open');
    document.body.style.overflow = 'hidden';
    setTimeout(function() {
      document.getElementById('entryMessage').focus();
    }, 500);
  }
  window.openForm = openForm;

  function closeForm() {
    document.getElementById('overlay').classList.remove('open');
    document.body.style.overflow = '';
  }
  window.closeForm = closeForm;

  // Close overlay on backdrop click
  document.getElementById('overlay').addEventListener('click', function(e) {
    if (e.target === this) closeForm();
  });

  // Escape key closes overlay
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      if (document.getElementById('overlay').classList.contains('open')) closeForm();
    }
  });

  function updateCharCount() {
    const textarea = document.getElementById('entryMessage');
    const counter = document.getElementById('charCount');
    const len = textarea.value.length;
    counter.textContent = len + ' / 500';
    counter.className = 'char-count';
    if (len >= 500) counter.classList.add('at-limit');
    else if (len >= 420) counter.classList.add('near-limit');
  }
  window.updateCharCount = updateCharCount;

  // ═══ SUBMIT ═══
  function submitEntry(e) {
    e.preventDefault();

    const message = document.getElementById('entryMessage').value.trim();
    if (!message) {
      document.getElementById('entryMessage').style.borderColor = '#D4725C';
      setTimeout(function() {
        document.getElementById('entryMessage').style.borderColor = '';
      }, 2000);
      return;
    }

    const name = document.getElementById('entryName').value.trim() || 'Anonym';
    const city = document.getElementById('entryCity').value.trim();
    const relationship = document.getElementById('entryRelationship').value;

    const newEntry = {
      timestamp: new Date().toISOString(),
      name: name,
      city: city,
      relationship: relationship,
      message: message
    };

    entries.push(newEntry);
    saveEntries(entries);

    // Close form
    closeForm();

    // Reset form
    document.getElementById('entryForm').reset();
    document.getElementById('charCount').textContent = '0 / 500';
    document.getElementById('charCount').className = 'char-count';

    // Show candle animation
    showCandleAnimation(function() {
      // Switch to all mode and render with highlight
      currentMode = 'all';
      document.getElementById('btnAll').classList.add('active');
      document.getElementById('btnRandom').classList.remove('active');
      document.getElementById('filterRelationship').value = '';
      document.getElementById('searchInput').value = '';
      updateCounter(true);
      renderEntries(entries.length - 1);

      // Scroll to top of entries
      window.scrollTo({ top: document.getElementById('entriesContainer').offsetTop - 100, behavior: 'smooth' });
    });
  }
  window.submitEntry = submitEntry;

  // ═══ CANDLE ANIMATION ═══
  function showCandleAnimation(callback) {
    const overlay = document.getElementById('candleAnim');
    overlay.classList.add('active');

    setTimeout(function() {
      overlay.classList.remove('active');
      if (callback) callback();
    }, 2800);
  }

  // ═══ NAVIGATION SCROLL ═══
  window.addEventListener('scroll', function() {
    const nav = document.getElementById('mainNav');
    if (window.scrollY > 60) {
      nav.classList.add('scrolled');
    } else {
      nav.classList.remove('scrolled');
    }
  });

  // ═══ MOBILE MENU ═══
  document.getElementById('menuToggle').addEventListener('click', function() {
    const menu = document.getElementById('mobileMenu');
    const isOpen = menu.classList.contains('open');
    menu.classList.toggle('open');
    this.innerHTML = isOpen ? '&#9776;' : '&times;';
  });

  // ═══ INIT ═══
  updateCounter(false);
  renderEntries();

})();
</script>

<script>if('serviceWorker' in navigator)navigator.serviceWorker.register('sw.js');</script>
</body>
</html>